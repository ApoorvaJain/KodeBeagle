---
---
<html lang="en">
<head>
    <title>BetterDocs</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:600,400' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="stylesheets/jquery.remodal.css"/>
    <link type="text/css" rel="stylesheet" href="stylesheets/demo.css"/>
</head>
<body>
<div class="remodal-bg">
    <header>
        <h2>
            <span class="left">BetterDocs</span>
            <span class="right"><i class="fa fa-github"></i></span>
        </h2>
    </header>
    <div class="container">
        <div class="topPanel">
            <div class="searchForm">
                <form id="searchByFQN">
                    <span class="searchIcon"><i class="fa fa-search fa-flip-horizontal"></i></span>
                    <input type="text" id="searchString" required
                           placeholder="java.nio.channels.FileChannel,java.nio.MappedByteBuffer">
                </form>
            </div>
            <span class="settingsIcon"><a href="#modal"><i class="fa fa-cog"></i></a></span>
        </div>
        <div class="searchResults">
            <div id="connectionError" class="alert-box error">
                <i class="fa fa-times-circle"></i> <span>error: </span>Failed to connect to BetterDocs server
            </div>

            <div id="leftPanel">
                <div class="repoInfo" id="analyzedProj">
                    <h3>Analyzed Projects</h3>
                    <select id="repoList">
                        {% for repo in site.data.repos %}
                        <option value="{{repo.login}}/{{repo.name}}">{{repo.login}}/{{repo.name}}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="repoInfo" id="resultTreeContainer">
                </div>
            </div>

            <div class="resultContainer" id="rightSideContainer">
                <h3>Code Reference
                    <span id="expand" class="viewOptions">
                        <a href="javascript:void(0);" onclick="app.expand()"><i class="fa fa-expand pull-right"></i></a>
                    </span>
                    <span id="compress" class="viewOptions">
                        <a href="javascript:void(0);" onclick="app.compress()"><i class="fa fa-compress pull-right"></i></a>
                    </span>
                </h3>

                <div id="results"></div>
            </div>

        </div>
        {% raw %}
        <script id="result-template" type="text/x-handlebars-template">
            {{#each files}}
            <div class="result" id="result{{@index}}">
                <div><a href="{{path}}">{{name}}</a></div>
                <br/>

                <div id="result{{@index}}-editor" class="editor">{{content}}</div>
            </div>
            {{/each}}
        </script>
        <script id="result-tree-template" type="text/x-handlebars-template">
            <h3>Projects with Usage </h3>
            <div id="resultTree">
                <ul>
                    {{#each projects}}
                    <li>{{name}}</li>
                    <ul>
                        {{#each files}}
                        <li>{{name}}</li>
                        {{/each}}
                    </ul>
                    {{/each}}
                </ul>
            </div>
        </script>
        {% endraw %}
    </div>
</div>
<div class="remodal" data-remodal-id="modal">
    <div class="heading">
        Configuration
    </div>
    <div class="modalContent">
        <form>
            <input type="text" id="elasticSearchURL"
                   placeholder="BetterDocs URL" value="172.16.12.162:9201"><br/>
            <input type="number" id="resultSize" value="50" placeholder="Result size">
        </form>
    </div>
    <footer>
        <div class="modalFooter">
            <a class="remodal-confirm" href="#">Save</a>
        </div>
    </footer>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.8/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js" type="text/javascript"
        charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/elasticsearch/3.1.3/elasticsearch.jquery.js" type="text/javascript"
        charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js" type="text/javascript"
        charset="utf-8"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.4.0/lodash.min.js" type="text/javascript"
        charset="utf-8"></script>
<script src="javascripts/jquery.remodal.js"></script>

<script src="javascripts/app.js"></script>

<script>
    var ht = Math.floor($(".repoInfo").height() / 14);
    $("#repoList").attr("size", ht - 12);
    $("#searchByFQN").submit(function (evt) {
        evt.preventDefault();
        app.search($("#searchString").val());
    });

    $(document).on('close', '.remodal', function (e) {
        if (e.reason === "confirmation") {
            app.saveConfig($("#elasticSearchURL").val(), $("#resultSize").val());
        }
    });

</script>

<!--Google Analytics-->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-60790831-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>

